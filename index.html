<!doctype html>
<html>
  <head>
    <title>Trigger n8n</title>
  </head>
  <body>
    <h2>Click the button to trigger n8n</h2>

    <input
      type="email"
      id="emailInput"
      placeholder="Enter your email"
      required
    />
    <button id="triggerButton">Click Me!</button>

    <script>
      document
        .getElementById("triggerButton")
        .addEventListener("click", async () => {
          const email = document.getElementById("emailInput").value;
          const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

          if (!email || !emailPattern.test(email)) {
            alert("Please enter a valid email address!");
            return;
          }

          try {
            const response = await fetch(
              "https://sandara.app.n8n.cloud/webhook/button-click",
              {
                method: "POST",
                headers: {
                  "Content-Type": "application/json",
                },
                body: JSON.stringify({ email }),
              },
            );

            if (response.ok) {
              alert("Request sent successfully!");
            } else {
              alert("There was an error with the request.");
            }
          } catch (error) {
            alert("An error occurred: " + error.message);
          }
        });
    </script>
  </body>
</html>
